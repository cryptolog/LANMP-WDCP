<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>文件管理器</title>
</head>
<body>
<link href="/templates/Style/css_body.css" rel="stylesheet" type="text/css" />
<script language="javascript" src="/templates/JSFile/fun_normal.js"></script>
<script language="javascript" src="/templates/JSFile/jquery.min.js"></script>
<script type="text/javascript" src="/js/fun.js"></script>
<a name="top" id="top"></a><table width="96%" border="0" cellspacing="0" cellpadding="0" align="center"  >
<tr >
    <td  >
<div class="bodytitle">
	<div class="bodytitleleft"></div>
	<div class="bodytitletxt">文件管理器</div>
</div>
</td></tr></table>
<br />

<table border="0" width="96%" align="center" cellpadding="1" cellspacing="1" class="tbtitle">

  <tr>
    <td colspan="9" bgcolor="#F2F4F6"><strong>在线文件管理系统</strong></td>
  </tr>
<? if (!empty($site_list)) { ?>
  <tr align="center"  bgcolor="#FFFFE9" >
    <td colspan="9"  align="left" ><?=$site_list;?></td>
  </tr>
<? exit;
} ?>
  <tr align="center"  bgcolor="#FFFFE9" >
    <td colspan="9"  align="left" >当前目录: <?=$cu_dir;?> | 
  <a href="<?=$PHP_SELF;?>?p=<?=$pre_dir;?>">上一层目录</a> | 
<a href="<?=$PHP_SELF;?>?p=<?=$home_dir;?>">主目录</a> | 
<a href=# onClick="location.reload()">刷新</a>&nbsp;&nbsp;&nbsp;
<a href="<?=$PHP_SELF;?>?act=get_file&p=<?=$cu_dir;?>">文件下载</a> |
<a href="<?=$PHP_SELF;?>?act=create_dir&p=<?=$cu_dir;?>">创建文件夹</a> |
<a href="<?=$PHP_SELF;?>?act=create_file&p=<?=$cu_dir;?>">创建文件</a> |
<a href="<?=$PHP_SELF;?>?act=upload_file&p=<?=$cu_dir;?>">文件上传</a> <?=$site_select;?></td>
  </tr>
<?
if ($get_file==1) {
?>
<form id="form2" name="form2" method="post" action="">
  <tr align="center"  bgcolor="#FFFFE9" >
    <td colspan="9"  align="left" >&nbsp;请输入下载文件的地址或网址:
      <label>
      <input name="get_url" type="text" id="get_url" size="60"></label>
      <input type="submit" name="Submit_gf" class="button" value="确定">&nbsp;&nbsp;下载文件会保存在当前目录下
      </td>
  </tr>
  <tr align="center">
    <td colspan="9" align="left" ></td>
  </tr>
</form>
<? } ?>
<?
if ($create_dir==1) {
?>
<form id="form3" name="form3" method="post" action="">
  <tr align="center"  bgcolor="#FFFFE9" >
    <td colspan="9"  align="left" >&nbsp;请输入文件夹名称(最好是字母,数字,下划线组成):
      <label>
      <input name="dirname" type="text" id="dirname" size="20"></label>
      <input type="submit" name="Submit_cdir" class="button" value="确定">&nbsp;&nbsp;
      </td>
  </tr>
  <tr align="center">
    <td colspan="9" align="left" ></td>
  </tr>
</form>
<? } ?>
<?
if ($create_file==1) {
?>
<form id="form3" name="form3" method="post" action="">
  <tr align="center"  bgcolor="#FFFFE9" >
    <td colspan="9"  align="left" >&nbsp;请输入文件名称:
      <label>
      <input name="filename" type="text" id="filename" size="20"></label>
      <input type="submit" name="Submit_cfile" class="button" value="确定">&nbsp;&nbsp;
      </td>
  </tr>
  <tr align="center">
    <td colspan="9" align="left" ></td>
  </tr>
</form>
<? } ?>
<?
if ($upload_file==1) {
?>
<form action="" method="post" enctype="multipart/form-data" name="form4" id="form4">   
<tr align="center">
<td colspan="9"  align="left" >   
  <table border="0" id="uploadfile">       
      <tr>
          <td colspan="2"><input type="file" name="upfile[]"></td>   
      </tr>   
  </table>   
</td>
  </tr>
  <tr align="center">
    <td colspan="9" align="left" ><input type="submit" name="Submit_upfile" class="button" value="确定">  <input type="button"   onclick="addline()" class="button" value="增加一行"></td>
  </tr>
  </form>   
  <script>   
  function addline(content){   
  newline=document.all.uploadfile.insertRow(-1);   
  newline.insertCell(-1).innerHTML='<input type="file" name="upfile[]"><input type="button" value="删除此行" onclick="del()">'
  }   
  function del(){   
  document.all.uploadfile.deleteRow(window.event.srcElement.parentElement.parentElement.rowIndex);   
  }   
  </script>
<? } ?>
<form id="form1" name="form1" method="post" action="">
<? if ($adminid==1) { ?>
  <tr align="center"  bgcolor="#FFFFFF" onMouseMove="tr_onMouseOver(this)" onMouseOut="tr_onMouseOut(this)">
    <td colspan="9"   align="left" class="a_fen"><a href="<?=$PHP_SELF;?>?p=<?=$backup_home;?>">备份管理</a> | 
<a href="<?=$PHP_SELF;?>?p=<?=$trash_home;?>">回收站</a> | 
虚拟主机站点文件(<a href="<?=$PHP_SELF;?>?p=/www/wdlinux/nginx/conf/vhost">nginx</a>,<a href="<?=$PHP_SELF;?>?p=/www/wdlinux/apache/conf/vhost">apache</a>) | 
<a href="<?=$PHP_SELF;?>?p=/www/wdlinux/etc/my.cnf&act=edit&t=f">my.conf</a> | 
<a href="<?=$PHP_SELF;?>?p=/www/wdlinux/etc/php.ini&act=edit&t=f">php.ini</a></td>
  </tr>
  <? } ?>
  <tr align="center"  bgcolor="#FFFFFF" onMouseMove="tr_onMouseOver(this)" onMouseOut="tr_onMouseOut(this)">
    <td   align="left" class="a_fen">选择</td>
    <td   align="left" class="a_fen">名称</td>
    <td   align="left" class="a_fen">类型</td>
    <td   align="left" class="a_fen">所有者</td>
    <td   align="left" class="a_fen">所有组</td>
    <td   align="left" class="a_fen">权限</td>
    <td   align="left" class="a_fen">最后修改</td>
    <td   align="left" class="a_fen">大小</td>
    <td align="left"   class="a_fen">操作</td>
  </tr>
  <? for ($i=0;$i<sizeof($list);$i++) { ?>
  <tr align="center"  bgcolor="#FFFFFF" onMouseMove="tr_onMouseOver(this)" onMouseOut="tr_onMouseOut(this)">
    <td   align="left" class="a_fen"><input name="num[]" type="checkbox" value="<?=$list[$i]['s10'];?>" />
      </td>
    <td   align="left" class="a_fen"><?=$list[$i]['a1'];?></td>
    <td   align="left" class="a_fen"><?=$list[$i]['a2'];?></td>
    <td   align="left" class="a_fen"><?=$list[$i]['s12'];?></td>
    <td   align="left" class="a_fen"><?=$list[$i]['s13'];?></td>
    <td   align="left" class="a_fen"><?=$list[$i]['s14'];?></td>
    <td   align="left" class="a_fen"><?=$list[$i]['s15'];?></td>
    <td   align="left" class="a_fen"><?=$list[$i]['s16'];?></td>
    <td align="left"   class="a_fen"><?=$list[$i]['mlink'];?>  <a href=# onClick="javascript:act_confirm('确定删除？','<?=$list[$i]['dlink'];?>');">删</a> <?=$list[$i]['tar'];?> <?=$list[$i]['down'];?></td>
  </tr>
  <? } ?>
  <tr align="center"  bgcolor="#FFFFFF" onMouseMove="tr_onMouseOver(this)" onMouseOut="tr_onMouseOut(this)">
    <td colspan="9"   align="left" class="a_fen"><input type="checkbox" id="fida" onClick="fidAll();">全选</label>&nbsp;&nbsp;&nbsp;动作:
	      <select name="act" id="act">
	        <option value="0" selected="selected">选择</option>
	        <option value="tar">打包</option>
	        <option value="del">删除</option>
			<option value="move">移动</option>
			<option value="copy">复制</option>
			<option value="move">改名</option>
	        <option value="perm">修改权限</option>
			<option value="ower">所有者</option>
			<option value="group">所有组</option>
		    </select> 
        &nbsp;打包名/权限值/用户名/组名/目标文件或目录名 
        <input name="act_name" type="text" id="act_name" size="15" />
         &nbsp; 继承:
         <input name="act_more" type="checkbox" id="act_more" value="1" />
	     <input name="Submit_act" type="submit" class="button" id="Submit_act" value="确定" /></td>
    </tr>
 </form>
</table>
<br>
<table width="96%" border="0" cellspacing="1" cellpadding="1" align="center" class="tbtitle" style="background:#FEDF63;">
  <tr  bgcolor="#FFFFE6">
    <td><span class="STYLE1">备注:</span><br />
	  	1 为确保数据安全及误操作,回收站的内容,不可以在此删除,可以使用ssh,winscp,sftp等删除<br />
	    2 选择打包后,可输入打包文件名,如留空,则用当前日期时间命名,如20110115.tar.gz<br />
		3 选择删除,数据将会删除到回收站中<br/>
	    4 选择修改权限,请在后面输入权限数据,如777<br />
	    5 选择所有者,请在后面输入相应的用户名或用户ID<br />
	    6 选择所有组,请在后面输入相应的用户组名或组ID<br />
	    7 继承,在选择权限,所有者,所有组时,代表该目录下的所有权限或用户,组均按此值修改. <br />
		8 <span class="STYLE2">修改权限和所有者,请务必谨慎,否则可能会导致网站访问故障或系统问题等</span><br>
		9 复制或移动或改名时,请在后面输入相关的复制或移动或改名的目标文件名或目录名<br>
		10 在线解压(支持.tar,tar.gz,tgz,bz2,zip格式)</td>
  </tr>
</table>

<br>
